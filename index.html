<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>麻雀点数計算</title>
</head>
<body>

<h2>麻雀 点数計算</h2>

和了形:
<select id="form">
  <option value="naki">鳴き</option>
  <option value="menzen">メンゼン</option>
  <option value="pinfu">平和</option>
  <option value="chitoi">七対子</option>
</select>
<br><br>

翻数:
<input type="number" id="han" min="1" max="13" value="1">
<br><br>

子 / 親:
<select id="oya">
  <option value="ko">子</option>
  <option value="oya">親</option>
</select>
<br><br>

<button onclick="calc()">計算</button>

<h3 id="result"></h3>

<script>
function getFu(form, winType) {
  if (form === "naki") return 30;
  if (form === "menzen") return winType === "ron" ? 40 : 30;
  if (form === "pinfu") return winType === "ron" ? 30 : 20;
  if (form === "chitoi") return 25;
}

function getBasePoint(fu, han) {
  if (han >= 13) return 8000;
  if (han >= 11) return 6000;
  if (han >= 8) return 4000;
  if (han >= 6) return 3000;
  if (han >= 5) return 2000;
  return fu * Math.pow(2, han + 2);
}

function round100(num) {
  return Math.ceil(num / 100) * 100;
}

function calc() {

  let form = document.getElementById("form").value;
  let han = parseInt(document.getElementById("han").value);
  let oya = document.getElementById("oya").value;

  let fuRon = getFu(form, "ron");
  let fuTsumo = getFu(form, "tsumo");

  let baseRon = getBasePoint(fuRon, han);
  let baseTsumo = getBasePoint(fuTsumo, han);

  let ronScore, tsumoText;

  if (oya === "ko") {

    ronScore = round100(baseRon * 4);

    let koPay = round100(baseTsumo * 1);
    let oyaPay = round100(baseTsumo * 2);
    tsumoText = "子: " + koPay + "点 / 親: " + oyaPay + "点";

  } else {

    ronScore = round100(baseRon * 6);

    let pay = round100(baseTsumo * 2);
    tsumoText = pay + "点オール";

  }

  document.getElementById("result").innerHTML =
    "【ロン】 " + fuRon + "符 → " + ronScore + "点<br>" +
    "【ツモ】 " + fuTsumo + "符 → " + tsumoText;
}
</script>

</body>
</html>
